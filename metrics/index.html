
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python Library for Fairness-Aware Ranking Data Generation, Evaluation, and Re-Ranking.">
      
      
      
      
        <link rel="prev" href="../ranktune/">
      
      
        <link rel="next" href="../rankers/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.21">
    
    
      
        <title>Metrics - FairRankTune User Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Metrics - FairRankTune User Guide" >
      
        <meta  property="og:description"  content="A Python Library for Fairness-Aware Ranking Data Generation, Evaluation, and Re-Ranking." >
      
        <meta  property="og:image"  content="./assets/images/social/metrics.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="None" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Metrics - FairRankTune User Guide" >
      
        <meta  name="twitter:description"  content="A Python Library for Fairness-Aware Ranking Data Generation, Evaluation, and Re-Ranking." >
      
        <meta  name="twitter:image"  content="./assets/images/social/metrics.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#metrics" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FairRankTune User Guide" class="md-header__button md-logo" aria-label="FairRankTune User Guide" data-md-component="logo">
      
  <img src="../assets/FairRankTune_blank_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FairRankTune User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Metrics
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="lime" data-md-color-accent="lightblue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FairRankTune User Guide" class="md-nav__button md-logo" aria-label="FairRankTune User Guide" data-md-component="logo">
      
  <img src="../assets/FairRankTune_blank_logo.png" alt="logo">

    </a>
    FairRankTune User Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../ranktune/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RankTune
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Metrics
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Metrics
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modular-metric-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Modular Metric Implementation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-fair-ranking-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Fair Ranking Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Supported Fair Ranking Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#group-exposure-exp" class="md-nav__link">
    <span class="md-ellipsis">
      Group Exposure (EXP)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-utility-expu" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Utility (EXPU)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-realized-utility-expru" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Realized Utility (EXPRU)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attention-weighted-rank-fairness-awrf" class="md-nav__link">
    <span class="md-ellipsis">
      Attention Weighted Rank Fairness (AWRF)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-rank-biased-precision-equality-erbe" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Rank Biased Precision Equality (ERBE)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-rank-biased-precision-proportionality-erbp" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Rank Biased Precision Proportionality (ERBP)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-rank-biased-precision-proportional-to-relevance-erbr" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Rank Biased Precision Proportional to Relevance (ERBR)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attribute-rank-parity-arp" class="md-nav__link">
    <span class="md-ellipsis">
      Attribute Rank Parity (ARP)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#normalized-discounted-kl-divergence-ndkl" class="md-nav__link">
    <span class="md-ellipsis">
      Normalized Discounted KL-Divergence (NDKL)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inequity-of-amortized-attention-iaa" class="md-nav__link">
    <span class="md-ellipsis">
      Inequity of Amortized Attention (IAA)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../rankers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rankers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modular-metric-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Modular Metric Implementation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-fair-ranking-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Fair Ranking Metrics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Supported Fair Ranking Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#group-exposure-exp" class="md-nav__link">
    <span class="md-ellipsis">
      Group Exposure (EXP)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-utility-expu" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Utility (EXPU)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-realized-utility-expru" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Realized Utility (EXPRU)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attention-weighted-rank-fairness-awrf" class="md-nav__link">
    <span class="md-ellipsis">
      Attention Weighted Rank Fairness (AWRF)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-rank-biased-precision-equality-erbe" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Rank Biased Precision Equality (ERBE)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-rank-biased-precision-proportionality-erbp" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Rank Biased Precision Proportionality (ERBP)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exposure-rank-biased-precision-proportional-to-relevance-erbr" class="md-nav__link">
    <span class="md-ellipsis">
      Exposure Rank Biased Precision Proportional to Relevance (ERBR)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#attribute-rank-parity-arp" class="md-nav__link">
    <span class="md-ellipsis">
      Attribute Rank Parity (ARP)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#normalized-discounted-kl-divergence-ndkl" class="md-nav__link">
    <span class="md-ellipsis">
      Normalized Discounted KL-Divergence (NDKL)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inequity-of-amortized-attention-iaa" class="md-nav__link">
    <span class="md-ellipsis">
      Inequity of Amortized Attention (IAA)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="metrics">Metrics</h1>
<h2 id="overview">Overview</h2>
<p><code>FairRankTune</code> provides several metrics for evaluating the fairness of ranked lists in the <code>Metrics</code> module. The table below provides a high-level overview of each metric. These metrics encompass a variety of fair ranking metrics, including both <a href="https://en.wikipedia.org/wiki/Fairness_(machine_learning)#Group_Fairness_criteria">group</a> and <a href="https://en.wikipedia.org/wiki/Fairness_(machine_learning)#Individual_Fairness_criteria">individual</a> fairness, along with both score-based and statistical parity metrics. </p>
<blockquote>
<p>What is group, individual, score-based, and or statistical parity fairness? </p>
</blockquote>
<p><em>Group Fairness</em>: Measures if groups of items are being treated similarly. For example, we might want to know if groups are making it to the top of ranking(s).</p>
<p><em>Individual Fairness</em>: Measures if similar items are being treated similarly. For example, we might want to know if items that are similar are ranked in similar positions in rankings.</p>
<p><em>Score-based Fairness</em>: Measures if exposure (or attention, clicks, views etc.) are proportional to item relevance or group relevance. For example, in the form of individual fairness, we might want to know if items that are similar received similar amounts of exposure in rankings. Or for group fairness, we might want to know if groups are click-on proportional to their relevance.</p>
<p><em>Statistical Parity Fairness</em>: A sub-type of <em>Group Fairness</em>, measures if groups receive a proportional share of the positive outcome; in ranking(s) the positive outcome can be the exposure or attention of the viewer or a share of top-ranked position. Statistical Parity is also known as Demographic Parity and explicitly does not use relevance scores. For example, we might want to know if groups receive comparable amounts of exposure.</p>
<table>
<thead>
<tr>
<th><strong>Metric</strong></th>
<th style="text-align: center;"><strong>Abbreviation</strong></th>
<th style="text-align: center;"><strong>Fairness (Group or Individual)</strong></th>
<th style="text-align: center;"><strong>Score-based</strong></th>
<th style="text-align: center;"><strong>Statistical Parity</strong></th>
<th style="text-align: center;"><strong>Reference</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#group-exposure-exp">Group Exposure</a></td>
<td style="text-align: center;">EXP</td>
<td style="text-align: center;">Group</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"><a href="https://dl.acm.org/doi/10.1145/3219819.3220088">Singh et al.</a></td>
</tr>
<tr>
<td><a href="#exposure-realized-utility-expru">Exposure Utility</a></td>
<td style="text-align: center;">EXPU</td>
<td style="text-align: center;">Group</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;"><a href="https://dl.acm.org/doi/10.1145/3219819.3220088">Singh et al.</a></td>
</tr>
<tr>
<td><a href="#exposure-realized-utility-expru">Exposure Realized Utility</a></td>
<td style="text-align: center;">EXPRU</td>
<td style="text-align: center;">Group</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;"><a href="https://dl.acm.org/doi/10.1145/3219819.3220088">Singh et al.</a></td>
</tr>
<tr>
<td><a href="#attention-weighted-rank-fairness-awrf">Attention Weighted Rank Fairness</a></td>
<td style="text-align: center;">AWRF</td>
<td style="text-align: center;">Group</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"><a href="https://dl.acm.org/doi/10.1145/3308560.3317595">Sapiezynski et al.</a></td>
</tr>
<tr>
<td><a href="#exposure-rank-biased-precision-equality-erbe">Exposure Rank Biased Precision Equality</a></td>
<td style="text-align: center;">ERBE</td>
<td style="text-align: center;">Group</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;"><a href="https://dl.acm.org/doi/abs/10.1145/3442381.3450080">Kirnap et al.</a></td>
</tr>
<tr>
<td><a href="#exposue-rank-biased-precision-proportionality-erbp">Exposure Rank Biased Precision Proportionality</a></td>
<td style="text-align: center;">ERBP</td>
<td style="text-align: center;">Group</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"><a href="https://dl.acm.org/doi/abs/10.1145/3442381.3450080">Kirnap et al.</a></td>
</tr>
<tr>
<td><a href="#exposure-rank-biased-precision-proportional-to-relevance-erbr">Exposure Rank Biased Precision Proportional to Relevance</a></td>
<td style="text-align: center;">ERBR</td>
<td style="text-align: center;">Group</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;"><a href="https://dl.acm.org/doi/abs/10.1145/3442381.3450080">Kirnap et al.</a></td>
</tr>
<tr>
<td><a href="#attribute-rank-parity-arp">Attribute Rank Parity</a></td>
<td style="text-align: center;">ARP</td>
<td style="text-align: center;">Group</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"><a href="https://ieeexplore.ieee.org/document/9835646">Cachel et al.</a></td>
</tr>
<tr>
<td><a href="#normalized-discounted-kl-divergence-ndkl">Normalized Discounted KL-Divergence</a></td>
<td style="text-align: center;">NDKL</td>
<td style="text-align: center;">Group</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;"><a href="https://dl.acm.org/doi/10.1145/3292500.3330691">Geyik et al.</a></td>
</tr>
<tr>
<td><a href="#inequity-of-amortized-attention-iaa">Inequity of Amortized Attention</a></td>
<td style="text-align: center;">IAA</td>
<td style="text-align: center;">Individual</td>
<td style="text-align: center;">Yes</td>
<td style="text-align: center;">No</td>
<td style="text-align: center;"><a href="https://dl.acm.org/doi/10.1145/3209978.3210063">Biega et al.</a></td>
</tr>
</tbody>
</table>
<h2 id="modular-metric-implementation">Modular Metric Implementation</h2>
<p>A key functionality of the  <code>Metrics</code> library in <code>FairRankTune</code>  is providing toolkit users multiple choices for how to calculate a given top-level fairness metric. For instance, for group exposure,  a popular fairness criteria,  <code>Metrics</code> offers seven ways of calculating a top-level exposure metric (e.g., min-max ratios, max absolute difference, L-2 norms of per-group exposures, etc.).</p>
<p>Below are the formulas supported for combining per-group style metrics. In the formulas <span class="arithmatex">\(V = [V_{1}, ..., V_{g}\)</span>] is an array of per-group metrics and <span class="arithmatex">\(G\)</span> is the number of groups. The <code>combo</code> variable is used directly in the function call. Depending on the formula used for aggregating per-group metrics the range of the given fairness metric varies. The range and its corresponding "most fair" value is provided in the table. </p>
<table>
<thead>
<tr>
<th><strong>Combo Variable in <code>FairRankTune</code></strong></th>
<th style="text-align: center;"><strong>Formula</strong></th>
<th style="text-align: center;"><strong>Range</strong></th>
<th style="text-align: center;"><strong>Most Fair</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>MinMaxRatio</code></td>
<td style="text-align: center;"><span class="arithmatex">\(min_{g} V / max_{g} V\)</span></td>
<td style="text-align: center;">[0,1]</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td><code>MaxMinRatio</code></td>
<td style="text-align: center;"><span class="arithmatex">\(max_{g} V / min_{g} V\)</span></td>
<td style="text-align: center;">[1, <span class="arithmatex">\(\infty\)</span>]</td>
<td style="text-align: center;">1</td>
</tr>
<tr>
<td><code>MaxMinDiff</code></td>
<td style="text-align: center;"><span class="arithmatex">\(max_{g} V - min_{g} V\)</span></td>
<td style="text-align: center;">[0,1]</td>
<td style="text-align: center;">0</td>
</tr>
<tr>
<td><code>MaxAbsDiff</code></td>
<td style="text-align: center;"><span class="arithmatex">\(max_{g} \mid V - V_{mean} \mid\)</span></td>
<td style="text-align: center;">[0, <span class="arithmatex">\(\infty\)</span>]</td>
<td style="text-align: center;">0</td>
</tr>
<tr>
<td><code>MeanAbsDev</code></td>
<td style="text-align: center;"><span class="arithmatex">\(\frac{1}{G} \sum_{g} \mid V - V_{mean}\mid\)</span></td>
<td style="text-align: center;">[0, <span class="arithmatex">\(\infty\)</span>]</td>
<td style="text-align: center;">0</td>
</tr>
<tr>
<td><code>LTwo</code></td>
<td style="text-align: center;"><span class="arithmatex">\(\lVert V \rVert_2^2\)</span></td>
<td style="text-align: center;">[0, <span class="arithmatex">\(\infty\)</span>]</td>
<td style="text-align: center;">0</td>
</tr>
<tr>
<td><code>Variance</code></td>
<td style="text-align: center;"><span class="arithmatex">\(\frac{1}{G - 1} \sum_{g} (V_{g} - V_{mean})^2\)</span></td>
<td style="text-align: center;">[0, <span class="arithmatex">\(\infty\)</span>]</td>
<td style="text-align: center;">0</td>
</tr>
</tbody>
</table>
<p>Usage:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">FairRankTune</span> <span class="kn">import</span> <span class="n">RankTune</span><span class="p">,</span> <span class="n">Metrics</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1">#Generate a biased (phi = 0) ranking of 1000 items, with two groups of 100</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1">#and 900 items each. </span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">RankTune</span><span class="o">.</span><span class="n">GenFromGroups</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="mf">.1</span><span class="p">,</span> <span class="mf">.9</span><span class="p">]),</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>  <span class="mi">1000</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1">#Calculate EXP with a MinMaxRatio</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">EXP_minmax</span><span class="p">,</span> <span class="n">avg_exposures_minmax</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">EXP</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>  <span class="n">item_group_dict</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXP_minmax: &quot;</span><span class="p">,</span> <span class="n">EXP_minmax</span><span class="p">,</span> <span class="s2">&quot;avg_exposures: &quot;</span><span class="p">,</span> <span class="n">avg_exposures</span><span class="p">)</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="c1">#Calculate EXP with a MaxAbsDiff</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">EXP_maxabs</span><span class="p">,</span> <span class="n">avg_exposures_maxabs</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">EXP</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>  <span class="n">item_group_dict</span><span class="p">,</span> <span class="s1">&#39;MaxAbsDiff&#39;</span><span class="p">)</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXP_maxabs: &quot;</span><span class="p">,</span> <span class="n">EXP_maxabs</span><span class="p">,</span> <span class="s2">&quot;avg_exposures: &quot;</span><span class="p">,</span> <span class="n">avg_exposures</span><span class="p">)</span>
</code></pre></div>
Outputs:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">EXP_minmax</span><span class="p">:</span>  <span class="mf">0.5420744267551784</span> <span class="n">avg_exposures</span><span class="p">:</span>  <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">0.2093867087428094</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">0.11350318011191189</span><span class="p">}</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">EXP_maxabs</span><span class="p">:</span>  <span class="mf">0.04794176431544876</span> <span class="n">avg_exposures</span><span class="p">:</span>  <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">0.2093867087428094</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">0.11350318011191189</span><span class="p">}</span>
</code></pre></div>
Notice that the <code>EXP_minmax</code> and <code>EXP_maxabs</code> are different. The second returned object is a dictionary with groups as keys and the values represent the per-group metric. In this example that is the average exposure of group 0 and group 1.</p>
<p>The following metrics have meta-metric functionality: <a href="#group-exposure-exp">EXP</a>, <a href="#exposure-utility-expu">EXPU</a>, <a href="#exposure-realized-utility-expru">EXRU</a>, <a href="#attention-weighted-rank-fairness-awrf">AWRF</a>, <a href="#exposure-rank-biased-precision-equality-erbe">ERBE</a>, <a href="#exposue-rank-biased-precision-proportionality-erbp">ERBP</a>, <a href="#exposure-rank-biased-precision-proportional-to-relevance-erbr">ERBPR</a>, and <a href="#attribute-rank-parity-arp">ARP</a>. To specify the desired aggregation form pass any of the strings in the table above as the  <code>combo</code> input variable. </p>
<h2 id="supported-fair-ranking-metrics">Supported Fair Ranking Metrics</h2>
<p>All metric functions take as the inputted <code>ranking_df</code> parameter a <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html">pandas dataframe</a> of the ranking(s) to be evaluated. These rankings need not have the same number of items, and items can be represented as floats, ints, or strings.</p>
<p>All group fairness metric functions take as the inputted <code>item_group_dict</code> parameter a <a href="https://realpython.com/python-dicts/">python dictionary</a> of items and their group membership. Items are keys, and the value represents the group of that item (ints or strings are equally fine). Note, that all group metrics supported in <code>FairRankTune</code> support multiple groups.</p>
<h3 id="group-exposure-exp">Group Exposure (EXP)</h3>
<p>EXP compares the average exposures of groups in the ranking(s) and does not consider relevances or scores associate with items. It aligns with the fairness concept of statistical parity. The per-group metric is the group average exposure, whereby the exposure of item <span class="arithmatex">\(x_i\)</span> in ranking <span class="arithmatex">\(\tau\)</span> is <span class="arithmatex">\(exposure(\tau,x_i) = 1 / log_2(\tau(x_i)+1))\)</span> and the average exposure for group <span class="arithmatex">\(g_j\)</span> is <span class="arithmatex">\(avgexp(\tau,g_j) = \sum_{\forall x \in g_{j}}exposure(\tau,x_i)/|g_{j}|\)</span>. The range of EXP and its "most fair" value depends on the <a href="#modular-metric-implementation">per-group aggregation</a> <code>combo</code> variable. </p>
<p>Usage:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">#Calculate EXP with a MinMaxRatio</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">EXP_minmax</span><span class="p">,</span> <span class="n">avg_exposures</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">EXP</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>  <span class="n">item_group_dict</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
</code></pre></div>
The first returned object is float specifying the EXP value and the second returned object is a dictionary of average exposures for each group (keys are group ids).</p>
<p>Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">10.1145/3219819.3220088</span><span class="p">,</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Singh, Ashudeep and Joachims, Thorsten}</span><span class="p">,</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Fairness of Exposure in Rankings}</span><span class="p">,</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2018}</span><span class="p">,</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="na">isbn</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{9781450355520}</span><span class="p">,</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Association for Computing Machinery}</span><span class="p">,</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{New York, NY, USA}</span><span class="p">,</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{https://doi.org/10.1145/3219819.3220088}</span><span class="p">,</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.1145/3219819.3220088}</span><span class="p">,</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="na">booktitle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Proceedings of the 24th ACM SIGKDD International Conference on Knowledge Discovery \&amp; Data Mining}</span><span class="p">,</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2219–2228}</span><span class="p">,</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="na">numpages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10}</span><span class="p">,</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="na">keywords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{algorithmic bias, fairness, position bias, equal opportunity, fairness in rankings}</span><span class="p">,</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="na">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{London, United Kingdom}</span><span class="p">,</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="na">series</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{KDD &#39;18}</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="p">}</span>
</code></pre></div>
</details>

<p>Fairness of Group Exposure is also introduced in <a href="https://dl.acm.org/doi/10.1145/3340531.3411962">Diaz et al.</a>.</p>
<p>Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">10.1145/3340531.3411962</span><span class="p">,</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Diaz, Fernando and Mitra, Bhaskar and Ekstrand, Michael D. and Biega, Asia J. and Carterette, Ben}</span><span class="p">,</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Evaluating Stochastic Rankings with Expected Exposure}</span><span class="p">,</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2020}</span><span class="p">,</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="na">isbn</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{9781450368599}</span><span class="p">,</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Association for Computing Machinery}</span><span class="p">,</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{New York, NY, USA}</span><span class="p">,</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{https://doi.org/10.1145/3340531.3411962}</span><span class="p">,</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.1145/3340531.3411962}</span><span class="p">,</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="na">booktitle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Proceedings of the 29th ACM International Conference on Information \&amp; Knowledge Management}</span><span class="p">,</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{275–284}</span><span class="p">,</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="na">numpages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10}</span><span class="p">,</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="na">keywords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{fairness, evaluation, diversity, learning to rank}</span><span class="p">,</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="na">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Virtual Event, Ireland}</span><span class="p">,</span>
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="na">series</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{CIKM &#39;20}</span>
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a><span class="p">}</span>
</code></pre></div>
</details>

<h3 id="exposure-utility-expu">Exposure Utility (EXPU)</h3>
<p>EXPU assesses if groups receive exposure proportional to their relevance in the ranking(s). This is a form of group fairness that considers the scores (relevances) associated with items. The per-group metric is the ratio of group average exposure and group average utility, whereby group average exposure is measured exactly as in <a href="#group-exposure-exp">EXP</a>. Group average utility for group <span class="arithmatex">\(g_j\)</span> is <span class="arithmatex">\(avgutil(\tau,g_j) = \sum_{\forall x \in g_{j}}x_i^{util_{\tau}}/|g_{j}|\)</span>, where <span class="arithmatex">\(x_i^{util_{\tau}}\)</span> is the utility (or relevance score) for candidate <span class="arithmatex">\(x_i\)</span> in ranking <span class="arithmatex">\(\tau\)</span>.  The range of EXPU and its "most fair" value depends on the <a href="#modular-metric-implementation">per-group aggregation</a> <code>combo</code> variable. </p>
<p><a href="https://dl.acm.org/doi/10.1145/3219819.3220088">Singh et al.</a> refer to EXPU as "Disparate Treatment", as pointed out by Raj et al. this terminology, is inconsistent with the use of these terms in the broader algorithmic fairness literature, thus <code>FairRankTune</code> uses the term "Exposure Utility" a introduced in [Raj et al.}(https://dl.acm.org/doi/10.1145/3477495.3532018).</p>
<p>Usage:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1">#Calculate EXPU with a MinMaxRatio</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">EXPU</span><span class="p">,</span> <span class="n">per_group</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">EXPU</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span><span class="p">,</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>  <span class="n">relevance_df</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
</code></pre></div>
Note that the relevance scores associated with the ranking(s) in <code>relevance_df</code> must be between 0 and 1. The first returned object is a float specifying the EXPU value and the second returned object is a dictionary of average exposure and average utility ratios for each group (keys are group ids).</p>
<p>Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">10.1145/3219819.3220088</span><span class="p">,</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Singh, Ashudeep and Joachims, Thorsten}</span><span class="p">,</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Fairness of Exposure in Rankings}</span><span class="p">,</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2018}</span><span class="p">,</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="na">isbn</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{9781450355520}</span><span class="p">,</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Association for Computing Machinery}</span><span class="p">,</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{New York, NY, USA}</span><span class="p">,</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{https://doi.org/10.1145/3219819.3220088}</span><span class="p">,</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.1145/3219819.3220088}</span><span class="p">,</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="na">booktitle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Proceedings of the 24th ACM SIGKDD International Conference on Knowledge Discovery \&amp; Data Mining}</span><span class="p">,</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2219–2228}</span><span class="p">,</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="na">numpages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10}</span><span class="p">,</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="na">keywords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{algorithmic bias, fairness, position bias, equal opportunity, fairness in rankings}</span><span class="p">,</span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="na">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{London, United Kingdom}</span><span class="p">,</span>
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="na">series</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{KDD &#39;18}</span>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="p">}</span>
</code></pre></div>
</details>

<h3 id="exposure-realized-utility-expru">Exposure Realized Utility (EXPRU)</h3>
<p>EXPRU assesses if groups are click-on proportional to their relevance in the ranking(s). This is a form of group fairness that considers the scores (relevances) associated with items. The per-group metric is the ratio of group average click-through rate and group average utility, whereby  group average utility is measured exactly as in EXPU. The average click-through rate for group <span class="arithmatex">\(g_j\)</span> in <span class="arithmatex">\(\tau\)</span> is <span class="arithmatex">\(avgctr(\tau,g_j) = \sum_{\forall x \in g_{j}}x_i^{ctr_{\tau}}/|g_{j}|\)</span>, where <span class="arithmatex">\(x_i^{ctr_{\tau}}\)</span> is the click-through rate for candidate <span class="arithmatex">\(x_i\)</span> in ranking <span class="arithmatex">\(\tau\)</span>.  The range of EXPRU and its "most fair" value depends on the <a href="#modular-metric-implementation">per-group aggregation</a> <code>combo</code> variable. </p>
<p><a href="https://dl.acm.org/doi/10.1145/3219819.3220088">Singh et al.</a> refer to EXPRU as "Disparate Impact", as pointed out by Raj et al. this terminology, is inconsistent with the use of these terms in the broader algorithmic fairness literature, thus <code>FairRankTune</code> uses the term "Exposure Realized Utility" a introduced in <a href="https://dl.acm.org/doi/10.1145/3477495.3532018">Raj et al.</a>.</p>
<p>Usage:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1">#Calculate EXPRU with a MinMaxRatio</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">EXPRU</span><span class="p">,</span> <span class="n">per_group</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">EXPRU</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span><span class="p">,</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>  <span class="n">relevance_df</span><span class="p">,</span> <span class="n">ctr_df</span><span class="p">,</span><span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
</code></pre></div>
Note that the relevance scores associated with the ranking(s) in <code>relevance_df</code> must be between 0 and 1 and the click-through-rates in <code>ctr_df</code> must be between 0 (no clicks) or 1 (100% ctr). The first returned object is a float specifying the EXPRU value and the second returned object is a dictionary of  average utility and average click-through rate ratios for each group (keys are group ids).</p>
<p>Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">10.1145/3219819.3220088</span><span class="p">,</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Singh, Ashudeep and Joachims, Thorsten}</span><span class="p">,</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Fairness of Exposure in Rankings}</span><span class="p">,</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2018}</span><span class="p">,</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="na">isbn</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{9781450355520}</span><span class="p">,</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Association for Computing Machinery}</span><span class="p">,</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{New York, NY, USA}</span><span class="p">,</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{https://doi.org/10.1145/3219819.3220088}</span><span class="p">,</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.1145/3219819.3220088}</span><span class="p">,</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="na">booktitle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Proceedings of the 24th ACM SIGKDD International Conference on Knowledge Discovery \&amp; Data Mining}</span><span class="p">,</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2219–2228}</span><span class="p">,</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="na">numpages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10}</span><span class="p">,</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="na">keywords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{algorithmic bias, fairness, position bias, equal opportunity, fairness in rankings}</span><span class="p">,</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="na">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{London, United Kingdom}</span><span class="p">,</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="na">series</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{KDD &#39;18}</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="p">}</span>
</code></pre></div>
</details>

<h3 id="attention-weighted-rank-fairness-awrf">Attention Weighted Rank Fairness (AWRF)</h3>
<p>AWRF compares the average attention of groups in the ranking(s)and does not consider relevances or scores associate with items. It aligns with the fairness concept of statistical parity.  Attention compared to <a href="#group-exposure-exp">exposure</a> uses a geometric discount on the "attention" assigned to positions in a ranking. The per-group metric is the group average attention,
whereby the attention score for item <span class="arithmatex">\(x_i\)</span> in ranking <span class="arithmatex">\(\tau\)</span> as <span class="arithmatex">\(attention(\tau,x_i) = 100 \times (1 - p) ^{(\tau(x_i) -1)} \times p\)</span>, where <span class="arithmatex">\(p\)</span> is a parameter representing the proportion of attention received by the first (top) ranked item.  The range of AWRF and its "most fair" value depends on the <a href="#modular-metric-implementation">per-group aggregation</a> <code>combo</code> variable. </p>
<p>Usage:
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">#Calculate AWRF with a MinMaxRatio</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">p</span> <span class="o">=</span> <span class="mf">.01</span> <span class="c1">#parameter representing the proportion of attention...</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="c1"># received by the first position</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="n">AWRF</span><span class="p">,</span> <span class="n">per_group</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">AWRF</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
</code></pre></div>
The first returned object is a float specifying the AWRF value and the second returned object is a dictionary of average attention values for each group (keys are group ids).</p>
<p>Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">10.1145/3308560.3317595</span><span class="p">,</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Sapiezynski, Piotr and Zeng, Wesley and E Robertson, Ronald and Mislove, Alan and Wilson, Christo}</span><span class="p">,</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Quantifying the Impact of User Attention on Fair Group Representation in Ranked Lists}</span><span class="p">,</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2019}</span><span class="p">,</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="na">isbn</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{9781450366755}</span><span class="p">,</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Association for Computing Machinery}</span><span class="p">,</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{New York, NY, USA}</span><span class="p">,</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{https://doi.org/10.1145/3308560.3317595}</span><span class="p">,</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.1145/3308560.3317595}</span><span class="p">,</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{553–562}</span><span class="p">,</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="na">numpages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10}</span><span class="p">,</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="na">keywords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{group fairness, ranked lists, information retrieval}</span><span class="p">,</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="na">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{San Francisco, USA}</span><span class="p">,</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="na">series</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{WWW &#39;19}</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="p">}</span>
</code></pre></div>
</details>

<h3 id="exposure-rank-biased-precision-equality-erbe">Exposure Rank Biased Precision Equality (ERBE)</h3>
<p>ERBE assesses if groups receive equal exposure whereby exposure is based on the Rank Biased Precision metric. This metric does not consider relevances or scores associate with items. Exposure in ERBE is determined differently compared to <a href="#group-exposure-exp">exposure (EXP)</a>. Specifically this calculation is based on the <a href="https://dl.acm.org/doi/10.1145/1416950.1416952">Rank Biased Precision (RBP) metric</a>. The per-group metric is the group RBP-based exposure, whereby the Rank Biased Precision exposure of item <span class="arithmatex">\(x_i\)</span> in ranking <span class="arithmatex">\(\tau\)</span> is <span class="arithmatex">\(exposureRBP(\tau,x_i) = \gamma^{(1-\tau(x_i))}\)</span> and the exposure for group <span class="arithmatex">\(g_j\)</span> is <span class="arithmatex">\(expRBP(\tau,g_j) = (1 - \gamma) \sum_{\forall x \in g_{j}}exposureRBP(\tau,x_i)\)</span>.  The range of ERBE and its "most fair" value depends on the <a href="#modular-metric-implementation">per-group aggregation</a> <code>combo</code> variable. </p>
<p>Usage:
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="c1">#Calculate ERBE with a MinMaxRatio</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">decay</span> <span class="o">=</span> <span class="mf">.01</span> <span class="c1">#parameter representing gamma which...</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="c1">#controls the importance of higher ranks</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">ERBE</span><span class="p">,</span> <span class="n">per_group</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">ERBE</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span><span class="p">,</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>  <span class="n">decay</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
</code></pre></div>
The first returned object is a float specifying the ERBE value and the second returned object is a dictionary of total exposure values for each group (keys are group ids).</p>
<p>Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">10.1145/3442381.3450080</span><span class="p">,</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{K\i{}rnap, \&quot;{O}mer and Diaz, Fernando and Biega, Asia and Ekstrand, Michael and Carterette, Ben and Yilmaz, Emine}</span><span class="p">,</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Estimation of Fair Ranking Metrics with Incomplete Judgments}</span><span class="p">,</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2021}</span><span class="p">,</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="na">isbn</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{9781450383127}</span><span class="p">,</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Association for Computing Machinery}</span><span class="p">,</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{New York, NY, USA}</span><span class="p">,</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{https://doi.org/10.1145/3442381.3450080}</span><span class="p">,</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.1145/3442381.3450080}</span><span class="p">,</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="na">booktitle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Proceedings of the Web Conference 2021}</span><span class="p">,</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{1065–1075}</span><span class="p">,</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="na">numpages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{11}</span><span class="p">,</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="na">keywords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{fair ranking, evaluation, information retrieval, fairness}</span><span class="p">,</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="na">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Ljubljana, Slovenia}</span><span class="p">,</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="na">series</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{WWW &#39;21}</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="p">}</span>
</code></pre></div>
</details>

<h3 id="exposure-rank-biased-precision-proportionality-erbp">Exposure Rank Biased Precision Proportionality (ERBP)</h3>
<p>ERBP assesses if groups receive exposure proportional to their size whereby exposure is based on the Rank Biased Precision metric) This metric does not consider relevances or scores associate with items. Exposure in ERBE is determined differently compared to <a href="#group-exposure-exp">exposure (EXP)</a>. Specifically this calculation is based on the <a href="https://dl.acm.org/doi/10.1145/1416950.1416952">Rank Biased Precision (RBP) metric</a>.  The per-group metric is the group average exposure, whereby exposure is measured exactly as in <a href="#exposure-rank-biased-precision-equality-erbe">ERBE</a>. Group average exposure for group <span class="arithmatex">\(g_j\)</span> is <span class="arithmatex">\(avgexpRBP(\tau,g_j) = (1 - \gamma) \sum_{\forall x \in g_{j}}exposureRBP(\tau,x_i)/|g_{j}|\)</span>.  The range of ERBP and its "most fair" value depends on the <a href="#modular-metric-implementation">per-group aggregation</a> <code>combo</code> variable. </p>
<p>Usage:
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1">#Calculate ERBP with a MinMaxRatio</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="n">decay</span> <span class="o">=</span> <span class="mf">.01</span> <span class="c1">#parameter representing gamma which...</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="c1">#controls the importance of higher ranks</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="n">ERBP</span><span class="p">,</span> <span class="n">per_group</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">ERBP</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span><span class="p">,</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>  <span class="n">decay</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
</code></pre></div>
The first returned object is a float specifying the ERBP value and the second returned object is a dictionary of average exposure values for each group (keys are group ids).
Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">10.1145/3442381.3450080</span><span class="p">,</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{K\i{}rnap, \&quot;{O}mer and Diaz, Fernando and Biega, Asia and Ekstrand, Michael and Carterette, Ben and Yilmaz, Emine}</span><span class="p">,</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Estimation of Fair Ranking Metrics with Incomplete Judgments}</span><span class="p">,</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2021}</span><span class="p">,</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="na">isbn</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{9781450383127}</span><span class="p">,</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Association for Computing Machinery}</span><span class="p">,</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{New York, NY, USA}</span><span class="p">,</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{https://doi.org/10.1145/3442381.3450080}</span><span class="p">,</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.1145/3442381.3450080}</span><span class="p">,</span>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="na">booktitle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Proceedings of the Web Conference 2021}</span><span class="p">,</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{1065–1075}</span><span class="p">,</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="na">numpages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{11}</span><span class="p">,</span>
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a><span class="na">keywords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{fair ranking, evaluation, information retrieval, fairness}</span><span class="p">,</span>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="na">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Ljubljana, Slovenia}</span><span class="p">,</span>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="na">series</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{WWW &#39;21}</span>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="p">}</span>
</code></pre></div>
</details>

<h3 id="exposure-rank-biased-precision-proportional-to-relevance-erbr">Exposure Rank Biased Precision Proportional to Relevance (ERBR)</h3>
<p>ERBR assesses if groups receive exposure proportional to how many relevant items are in the group. It aligns with the fairness concept of statistical parity. This is a form of group fairness that considers the scores (relevances) associated with items. The per-group metric is the ratio of group exposure and the number of items belonging to the given group that are relevant, whereby exposure is measured exactly as in ERBE. This ratio for group <span class="arithmatex">\(g_j\)</span> is <span class="arithmatex">\(expRBP2rel(\tau,g_j) = (1 - \gamma) \sum_{\forall x \in g_{j}}exposureRBP(\tau,x_i)/|g_{j}^{rel}|\)</span>, where <span class="arithmatex">\(|g_{j}^{rel}|\)</span> is the count of relevant items in group <span class="arithmatex">\(g_{j}\)</span>.  The range of ERBR and its "most fair" value depends on the <a href="#modular-metric-implementation">per-group aggregation</a> <code>combo</code> variable. </p>
<p>Usage:
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1">#Calculate ERBR with a MinMaxRatio</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="n">decay</span> <span class="o">=</span> <span class="mf">.01</span> <span class="c1">#parameter representing gamma which...</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="c1">#controls the importance of higher ranks</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="n">ERBR</span><span class="p">,</span> <span class="n">per_group</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">ERBP</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span><span class="p">,</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>  <span class="n">relevance_df</span><span class="p">,</span> <span class="n">decay</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
</code></pre></div>
Note that the relevance scores associated with the ranking(s) in <code>relevance_df</code> must be either 0 or 1. The first returned object is float specifying the ERBR value and the second returned object is a dictionary of exposure and relevance ratios for each group (keys are group ids).</p>
<p>Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">10.1145/3442381.3450080</span><span class="p">,</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{K\i{}rnap, \&quot;{O}mer and Diaz, Fernando and Biega, Asia and Ekstrand, Michael and Carterette, Ben and Yilmaz, Emine}</span><span class="p">,</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Estimation of Fair Ranking Metrics with Incomplete Judgments}</span><span class="p">,</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2021}</span><span class="p">,</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="na">isbn</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{9781450383127}</span><span class="p">,</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Association for Computing Machinery}</span><span class="p">,</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{New York, NY, USA}</span><span class="p">,</span>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{https://doi.org/10.1145/3442381.3450080}</span><span class="p">,</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.1145/3442381.3450080}</span><span class="p">,</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a><span class="na">booktitle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Proceedings of the Web Conference 2021}</span><span class="p">,</span>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{1065–1075}</span><span class="p">,</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="na">numpages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{11}</span><span class="p">,</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="na">keywords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{fair ranking, evaluation, information retrieval, fairness}</span><span class="p">,</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a><span class="na">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Ljubljana, Slovenia}</span><span class="p">,</span>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="na">series</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{WWW &#39;21}</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a><span class="p">}</span>
</code></pre></div>
</details>

<h3 id="attribute-rank-parity-arp">Attribute Rank Parity (ARP)</h3>
<p>ARP compares the number of mixed pairs won by groups in the ranking(s) and does not consider relevances or scores associate with items. It aligns with the fairness concept of statistical parity. ARP decomposes the ranking into pairwise comparisons, a mixed pair contains items from two different groups, the item "on top" is said to "win" the pair. The per-group metric is the average mixed pairs won by each group, calculated as <span class="arithmatex">\(avgpairs(\tau, g_i) = \# ~mixedpairswon(g_i) / \# totalmixedpairs(g_i)\)</span> in ranking <span class="arithmatex">\(\tau\)</span>.  The range of ARP and its "most fair" value depends on the <a href="#modular-metric-implementation">per-group aggregation</a> <code>combo</code> variable. </p>
<p>Usage:
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1">#Calculate ARP with a MaxAbsDiff</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="n">ARP</span><span class="p">,</span> <span class="n">per_group</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">ARP</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span><span class="p">,</span> <span class="s1">&#39;MaxAbsDiff&#39;</span><span class="p">)</span>
</code></pre></div></p>
<p>The first returned object is a float specifying the ARP value and the second returned object is a dictionary of FPR scores (average count of won mixed pairs) for each group (keys are group ids).</p>
<p>Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">9835646</span><span class="p">,</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="w">  </span><span class="na">author</span><span class="p">=</span><span class="s">{Cachel, Kathleen and Rundensteiner, Elke and Harrison, Lane}</span><span class="p">,</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="w">  </span><span class="na">booktitle</span><span class="p">=</span><span class="s">{2022 IEEE 38th International Conference on Data Engineering (ICDE)}</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="w">  </span><span class="na">title</span><span class="p">=</span><span class="s">{MANI-Rank: Multiple Attribute and Intersectional Group Fairness for Consensus Ranking}</span><span class="p">,</span><span class="w"> </span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">  </span><span class="na">year</span><span class="p">=</span><span class="s">{2022}</span><span class="p">,</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="w">  </span><span class="na">volume</span><span class="p">=</span><span class="s">{}</span><span class="p">,</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">  </span><span class="na">number</span><span class="p">=</span><span class="s">{}</span><span class="p">,</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="w">  </span><span class="na">pages</span><span class="p">=</span><span class="s">{1124-1137}</span><span class="p">,</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="w">  </span><span class="na">doi</span><span class="p">=</span><span class="s">{10.1109/ICDE53745.2022.00089}</span><span class="p">}</span>
</code></pre></div>
</details>

<h3 id="normalized-discounted-kl-divergence-ndkl">Normalized Discounted KL-Divergence (NDKL)</h3>
<p>NDKL asseses the representation of groups in dsicrete prefixes of the ranking. It does not considers the relevance or scores associated with items. It aligns with the fairness cocnept of statistical parity and is assess on a single ranking. The NDKL of ranking <span class="arithmatex">\(\tau\)</span> with respect to groups <span class="arithmatex">\(G\)</span> is defined as:
<span class="arithmatex">\(\frac{1}{Z}\sum^{|X|}_{i = 1}\frac{1}{log_{2}(i +1 )}d_{KL}(D_{\tau_i} || D_{X})\)</span>
where <span class="arithmatex">\(d_{KL}(D_{\tau_i} || D_{X})\)</span> is the <a href="https://en.wikipedia.org/wiki/Kullback%E2%80%93Leibler_divergence">KL-divergence</a> score of the group proportions of the first <span class="arithmatex">\(i\)</span> positions in <span class="arithmatex">\(\tau\)</span> and the group proportions of the item set <span class="arithmatex">\(X\)</span> and <span class="arithmatex">\(Z = \sum_{i = 1}^{| \tau |} \frac{1}{log_2(i + 1)}\)</span>. NDKL ranges from 0 to <span class="arithmatex">\(\infty\)</span>, and is most fair at 0.</p>
<p>Usage:
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1">#Calculate NDKL</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="n">NDKL</span><span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">NDKL</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span><span class="p">)</span>
</code></pre></div>
The returned object is a float specifying the NDKL value.</p>
<p>Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">10.1145/3292500.3330691</span><span class="p">,</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Geyik, Sahin Cem and Ambler, Stuart and Kenthapadi, Krishnaram}</span><span class="p">,</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Fairness-Aware Ranking in Search \&amp; Recommendation Systems with Application to LinkedIn Talent Search}</span><span class="p">,</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2019}</span><span class="p">,</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="na">isbn</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{9781450362016}</span><span class="p">,</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Association for Computing Machinery}</span><span class="p">,</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{New York, NY, USA}</span><span class="p">,</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{https://doi.org/10.1145/3292500.3330691}</span><span class="p">,</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.1145/3292500.3330691}</span><span class="p">,</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="na">booktitle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Proceedings of the 25th ACM SIGKDD International Conference on Knowledge Discovery \&amp; Data Mining}</span><span class="p">,</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2221–2231}</span><span class="p">,</span>
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a><span class="na">numpages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{11}</span><span class="p">,</span>
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a><span class="na">keywords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{fairness-aware ranking, talent search \&amp; recommendation systems}</span><span class="p">,</span>
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a><span class="na">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Anchorage, AK, USA}</span><span class="p">,</span>
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a><span class="na">series</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{KDD &#39;19}</span>
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a><span class="p">}</span>
</code></pre></div>
</details>

<h3 id="inequity-of-amortized-attention-iaa">Inequity of Amortized Attention (IAA)</h3>
<p>IAA assess if a series of rankings is individually fair; meaning items are given attention similiar to their relevance. IAA measures the difference, via the <span class="arithmatex">\(L_1\)</span> norm between the cumulative attention and cumulative relevance of items in the rankings. Whereby the attention of an item <span class="arithmatex">\(x_i\)</span> in ranking <span class="arithmatex">\(\tau\)</span> is <span class="arithmatex">\(attention(\tau,x_i) = 1 / log_2(\tau(x_i)+1))\)</span> and the relevance of an item is a [0-1]-normalized score. IAA is ranges from 0 to <span class="arithmatex">\(\infty\)</span>, and is most fair at 0.</p>
<p>Usage:
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1">#Calculate IAA</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="n">IAA</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">IAA</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span> <span class="n">relevance_df</span><span class="p">)</span>
</code></pre></div>
Note that the relevance scores associated with the rankings in <code>relevance_df</code> must be between 0 and 1. The returned object is a float specifying the IAA value.</p>
<p>Citation:</p>
<details>
  <summary>BibTeX</summary>

<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">10.1145/3209978.3210063</span><span class="p">,</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="na">author</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Biega, Asia J. and Gummadi, Krishna P. and Weikum, Gerhard}</span><span class="p">,</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="na">title</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Equity of Attention: Amortizing Individual Fairness in Rankings}</span><span class="p">,</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="na">year</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{2018}</span><span class="p">,</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="na">isbn</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{9781450356572}</span><span class="p">,</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="na">publisher</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Association for Computing Machinery}</span><span class="p">,</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="na">address</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{New York, NY, USA}</span><span class="p">,</span>
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a><span class="na">url</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{https://doi.org/10.1145/3209978.3210063}</span><span class="p">,</span>
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a><span class="na">doi</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10.1145/3209978.3210063}</span><span class="p">,</span>
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="na">booktitle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{The 41st International ACM SIGIR Conference on Research \&amp; Development in Information Retrieval}</span><span class="p">,</span>
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a><span class="na">pages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{405–414}</span><span class="p">,</span>
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a><span class="na">numpages</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{10}</span><span class="p">,</span>
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a><span class="na">keywords</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{individual fairness, fair ranking, amortized fairness, exposure, algorithmic fairness, attention, position bias}</span><span class="p">,</span>
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a><span class="na">location</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{Ann Arbor, MI, USA}</span><span class="p">,</span>
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a><span class="na">series</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">{SIGIR &#39;18}</span>
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a><span class="p">}</span>
</code></pre></div>
</details>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Kcachel" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "navigation.top", "navigation.indexes", "toc.follow", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a7c05c9e.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>