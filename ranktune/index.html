
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python Library for Fairness-Aware Ranking Data Generation, Evaluation, and Re-Ranking.">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../metrics/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.21">
    
    
      
        <title>RankTune - FairRankTune User Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="RankTune - FairRankTune User Guide" >
      
        <meta  property="og:description"  content="A Python Library for Fairness-Aware Ranking Data Generation, Evaluation, and Re-Ranking." >
      
        <meta  property="og:image"  content="./assets/images/social/ranktune.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="None" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="RankTune - FairRankTune User Guide" >
      
        <meta  name="twitter:description"  content="A Python Library for Fairness-Aware Ranking Data Generation, Evaluation, and Re-Ranking." >
      
        <meta  name="twitter:image"  content="./assets/images/social/ranktune.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#ranktune" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FairRankTune User Guide" class="md-header__button md-logo" aria-label="FairRankTune User Guide" data-md-component="logo">
      
  <img src="../assets/FairRankTune_blank_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FairRankTune User Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RankTune
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="amber" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="lime" data-md-color-accent="lightblue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FairRankTune User Guide" class="md-nav__button md-logo" aria-label="FairRankTune User Guide" data-md-component="logo">
      
  <img src="../assets/FairRankTune_blank_logo.png" alt="logo">

    </a>
    FairRankTune User Guide
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    RankTune
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    RankTune
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-group-sizes" class="md-nav__link">
    <span class="md-ellipsis">
      Using Group Sizes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-an-existing-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Using an Existing Dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-scores-with-the-ranking" class="md-nav__link">
    <span class="md-ellipsis">
      Generating Scores With the Ranking
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-does-it-work" class="md-nav__link">
    <span class="md-ellipsis">
      How does it work?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How does it work?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ranktune-demonstration" class="md-nav__link">
    <span class="md-ellipsis">
      RankTune Demonstration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../metrics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metrics
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../rankers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rankers
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-group-sizes" class="md-nav__link">
    <span class="md-ellipsis">
      Using Group Sizes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-an-existing-dataset" class="md-nav__link">
    <span class="md-ellipsis">
      Using an Existing Dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generating-scores-with-the-ranking" class="md-nav__link">
    <span class="md-ellipsis">
      Generating Scores With the Ranking
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-does-it-work" class="md-nav__link">
    <span class="md-ellipsis">
      How does it work?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How does it work?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ranktune-demonstration" class="md-nav__link">
    <span class="md-ellipsis">
      RankTune Demonstration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="ranktune">RankTune</h1>
<h2 id="overview">Overview</h2>
<p>RankTune is a pseudo-stochastic data generation method for creating fairness-aware ranked lists using the fairness concept of statistical parity. Included in the <code>RankTune</code> module, it creates ranking(s) based on the <code>phi</code> representativeness parameter. When <code>phi = 0</code> then the generated ranked list(s) does not represent groups fairly, and as <code>phi</code> increases groups are represented more and more fairly; thus <code>phi = 1</code> groups are fairly represented. RankTune uses a <a href="#how-does-it-work">pseudo-random process</a> to generate fairness-aware ranked data. RankTune can generate ranked data from <a href="#using-group-sizes">user provided group sizes</a>, from <a href="#using-an-existing-dataset">existing datasets</a>, along with <a href="#generating-scores-with-the-ranking">producing relevance scores</a> accompanying the ranked list(s). </p>
<h2 id="usage">Usage</h2>
<p>RankTune can be utilized through four function interfaces.</p>
<h3 id="using-group-sizes">Using Group Sizes</h3>
<p><code>RankTune</code> can be used to generate ranking(s) from <code>group_proportions</code>, a numpy array with each group's proportion of the total items,<code>num_items</code>, by using the <code>GenFromGroups()</code> function.</p>
<p>Usage:
<div class="highlight"><span class="filename">GenFromGroups() function</span><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">FairRankTune</span> <span class="k">as</span> <span class="nn">frt</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="kn">from</span> <span class="nn">FairRankTune</span> <span class="kn">import</span> <span class="n">RankTune</span><span class="p">,</span> <span class="n">Metrics</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="c1">#Generate a biased (phi = 0.1) ranking of 1000 items, with four groups of 100,</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># 200, 300, and 400 items each.</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="n">group_proportions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="mf">.1</span><span class="p">,</span> <span class="mf">.2</span><span class="p">,</span> <span class="mf">.3</span><span class="p">,</span> <span class="mf">.4</span><span class="p">])</span> <span class="c1">#Array of group proportions</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="n">num_items</span> <span class="o">=</span> <span class="mi">1000</span> <span class="c1">#1000 items to be in the generated ranking</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="n">phi</span> <span class="o">=</span> <span class="mf">0.1</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="n">r_cnt</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#Generate 1 ranking</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="n">seed</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1">#For reproducibility</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="hll"><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">RankTune</span><span class="o">.</span><span class="n">GenFromGroups</span><span class="p">(</span><span class="n">group_proportions</span><span class="p">,</span>
</span><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="hll">    <span class="n">num_items</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">r_cnt</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>
</span><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="c1">#Calculate EXP with a MinMaxRatio</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="n">EXP_minmax</span><span class="p">,</span> <span class="n">avg_exposures_minmax</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">EXP</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    <span class="n">item_group_dict</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXP of generated ranking: &quot;</span><span class="p">,</span> <span class="n">EXP_minmax</span><span class="p">,</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>    <span class="s2">&quot;avg_exposures: &quot;</span><span class="p">,</span> <span class="n">avg_exposures_minmax</span><span class="p">)</span>
</code></pre></div></p>
<p>Output:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">EXP</span> <span class="n">of</span> <span class="n">generated</span> <span class="n">ranking</span><span class="p">:</span>  <span class="mf">0.511665941043515</span> <span class="n">avg_exposures</span><span class="p">:</span>  <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">0.20498798214669187</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">0.13126425437156242</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mf">0.11461912123646827</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">0.10488536878769836</span><span class="p">}</span>
</code></pre></div>
Can confirm this is an unfair ranking by the low EXP value.</p>
<h3 id="using-an-existing-dataset">Using an Existing Dataset</h3>
<p><code>RankTune</code> can be used to generate ranking(s) from <code>item_group_dict</code>, a dictionary of items where the keys are each item's group by using the <code>GenFromItems()</code> function.</p>
<p>Usage:
<div class="highlight"><span class="filename">GenFromItems() function</span><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span> <span class="nn">FairRankTune</span> <span class="k">as</span> <span class="nn">frt</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="kn">from</span> <span class="nn">FairRankTune</span> <span class="kn">import</span> <span class="n">RankTune</span><span class="p">,</span> <span class="n">Metrics</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="c1">#Generate a biased (phi = 0.1) ranking</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="n">item_group_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Joe</span><span class="o">=</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span>  <span class="n">David</span><span class="o">=</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="n">Bella</span><span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">Heidi</span><span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">Amy</span> <span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    <span class="n">Jill</span><span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">Jane</span><span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">Dave</span><span class="o">=</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="n">Nancy</span><span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">Nick</span><span class="o">=</span> <span class="s2">&quot;M&quot;</span><span class="p">)</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="n">phi</span> <span class="o">=</span> <span class="mf">0.1</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="n">r_cnt</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#Generate 1 ranking</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="n">seed</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1">#For reproducibility</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="hll"><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">RankTune</span><span class="o">.</span><span class="n">GenFromItems</span><span class="p">(</span><span class="n">item_group_dict</span><span class="p">,</span>
</span><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="hll">    <span class="n">phi</span><span class="p">,</span> <span class="n">r_cnt</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>
</span><a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="c1">#Calculate EXP with a MinMaxRatio</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="n">EXP_minmax</span><span class="p">,</span> <span class="n">avg_exposures_minmax</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">EXP</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>    <span class="n">item_group_dict</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generated ranking: &quot;</span><span class="p">,</span> <span class="n">ranking_df</span><span class="p">)</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXP of generated ranking: &quot;</span><span class="p">,</span> <span class="n">EXP_minmax</span><span class="p">,</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>    <span class="s2">&quot;avg_exposures: &quot;</span><span class="p">,</span> <span class="n">avg_exposures_minmax</span><span class="p">)</span>
</code></pre></div></p>
<p>Output:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">Generated</span> <span class="n">ranking</span><span class="p">:</span>         <span class="mi">0</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="mi">0</span>   <span class="n">Nick</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="mi">1</span>   <span class="n">Dave</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="mi">2</span>  <span class="n">David</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="mi">3</span>    <span class="n">Joe</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="mi">4</span>  <span class="n">Nancy</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="mi">5</span>   <span class="n">Jane</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="mi">6</span>   <span class="n">Jill</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="mi">7</span>    <span class="n">Amy</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="mi">8</span>  <span class="n">Heidi</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="mi">9</span>  <span class="n">Bella</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="n">EXP</span> <span class="n">of</span> <span class="n">generated</span> <span class="n">ranking</span><span class="p">:</span>  <span class="mf">0.5158099476966725</span> <span class="n">avg_exposures</span><span class="p">:</span>  <span class="p">{</span><span class="s1">&#39;M&#39;</span><span class="p">:</span> <span class="mf">0.6404015779112127</span><span class="p">,</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span> <span class="mf">0.33032550440724917</span><span class="p">}</span>
</code></pre></div>
We can confirm this is a biased ranking base don the low EXP score and large difference in average exposure between the 'M' and 'W' groups.</p>
<h3 id="generating-scores-with-the-ranking">Generating Scores With the Ranking</h3>
<p>Both <code>GenFromGroups()</code> and <code>GenFromItems()</code> contain sibling functions; respectively, <code>ScoredGenFromGroups()</code> and <code>ScoredGenFromItems()</code> that also generate relevance scores alongside the produced ranking(s). Scores are generated from either a normal or uniform distribution by setting the <code>score_dist</code> parameter to either <code>normal</code> or <code>uniform</code>.</p>
<p>For generating from group proportions use <code>ScoredGenFromGroups()</code> as follows:</p>
<div class="highlight"><span class="filename">ScoredGenFromGroups() function</span><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">import</span> <span class="nn">FairRankTune</span> <span class="k">as</span> <span class="nn">frt</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="kn">from</span> <span class="nn">FairRankTune</span> <span class="kn">import</span> <span class="n">RankTune</span><span class="p">,</span> <span class="n">Metrics</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="c1">#Generate a biased (phi = 0.1) ranking of 1000 items, with four groups of 100, </span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c1"># 200, 300, and 400 items each.</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="n">group_proportions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="mf">.1</span><span class="p">,</span> <span class="mf">.2</span><span class="p">,</span> <span class="mf">.3</span><span class="p">,</span> <span class="mf">.4</span><span class="p">])</span> <span class="c1">#Array of group proportions</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="n">num_items</span> <span class="o">=</span> <span class="mi">1000</span> <span class="c1">#1000 items to be in the generated ranking</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="n">phi</span> <span class="o">=</span> <span class="mf">0.1</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="n">r_cnt</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#Generate 1 ranking</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="n">seed</span> <span class="o">=</span> <span class="mi">11</span> <span class="c1">#For reproducibility</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="n">score_dist</span> <span class="o">=</span> <span class="s2">&quot;uniform&quot;</span>
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a><span class="hll"><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span><span class="p">,</span> <span class="n">scores_df</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">RankTune</span><span class="o">.</span><span class="n">ScoredGenFromGroups</span><span class="p">(</span><span class="n">group_proportions</span><span class="p">,</span>
</span><a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a><span class="hll">    <span class="n">num_items</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">r_cnt</span><span class="p">,</span> <span class="n">score_dist</span><span class="p">,</span> <span class="n">seed</span><span class="p">)</span>
</span><a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a><span class="c1">#Calculate EXP with a MinMaxRatio</span>
<a id="__codelineno-4-18" name="__codelineno-4-18" href="#__codelineno-4-18"></a><span class="n">EXP_minmax</span><span class="p">,</span> <span class="n">avg_exposures_minmax</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">EXP</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span>
<a id="__codelineno-4-19" name="__codelineno-4-19" href="#__codelineno-4-19"></a>    <span class="n">item_group_dict</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
<a id="__codelineno-4-20" name="__codelineno-4-20" href="#__codelineno-4-20"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXP of generated ranking: &quot;</span><span class="p">,</span> <span class="n">EXP_minmax</span><span class="p">,</span>
<a id="__codelineno-4-21" name="__codelineno-4-21" href="#__codelineno-4-21"></a>    <span class="s2">&quot;avg_exposures: &quot;</span><span class="p">,</span> <span class="n">avg_exposures_minmax</span><span class="p">)</span>
</code></pre></div>
<p>Output:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">EXP</span> <span class="n">of</span> <span class="n">generated</span> <span class="n">ranking</span><span class="p">:</span>  <span class="mf">0.5218433930014378</span> <span class="n">avg_exposures</span><span class="p">:</span>  <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">0.20212221456603452</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">0.13273063123258025</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mf">0.11380909457280128</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">0.10547614225010409</span><span class="p">}</span>
</code></pre></div></p>
<p>For generating from existing items use <code>ScoredGenFromItems()</code> as follows:</p>
<div class="highlight"><span class="filename">ScoredGenFromGroups() function</span><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">import</span> <span class="nn">FairRankTune</span> <span class="k">as</span> <span class="nn">frt</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="kn">from</span> <span class="nn">FairRankTune</span> <span class="kn">import</span> <span class="n">RankTune</span><span class="p">,</span> <span class="n">Metrics</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="c1">#Generate a biased (phi = 0.1) ranking</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="n">item_group_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">Joe</span><span class="o">=</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span>  <span class="n">David</span><span class="o">=</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="n">Bella</span><span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">Heidi</span><span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">Amy</span> <span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="n">Jill</span><span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">Jane</span><span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">Dave</span><span class="o">=</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="n">Nancy</span><span class="o">=</span> <span class="s2">&quot;W&quot;</span><span class="p">,</span> <span class="n">Nick</span><span class="o">=</span> <span class="s2">&quot;M&quot;</span><span class="p">)</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="n">r_cnt</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1">#Generate 1 ranking</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="n">seed</span> <span class="o">=</span> <span class="mi">10</span> <span class="c1">#For reproducibility</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="n">phi</span> <span class="o">=</span> <span class="mf">0.1</span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="n">score_dist</span> <span class="o">=</span> <span class="s2">&quot;uniform&quot;</span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="hll"><span class="n">ranking_df</span><span class="p">,</span> <span class="n">item_group_dict</span><span class="p">,</span> <span class="n">score_df</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">RankTune</span><span class="o">.</span><span class="n">ScoredGenFromItems</span><span class="p">(</span><span class="n">item_group_dict</span><span class="p">,</span>
</span><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="hll">    <span class="n">phi</span><span class="p">,</span> <span class="n">r_cnt</span><span class="p">,</span> <span class="n">score_dist</span><span class="p">,</span><span class="n">seed</span><span class="p">)</span>
</span><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a><span class="c1">#Calculate EXP with a MinMaxRatio</span>
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a><span class="n">EXP_minmax</span><span class="p">,</span> <span class="n">avg_exposures_minmax</span> <span class="o">=</span> <span class="n">frt</span><span class="o">.</span><span class="n">Metrics</span><span class="o">.</span><span class="n">EXP</span><span class="p">(</span><span class="n">ranking_df</span><span class="p">,</span>
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>    <span class="n">item_group_dict</span><span class="p">,</span> <span class="s1">&#39;MinMaxRatio&#39;</span><span class="p">)</span>
<a id="__codelineno-6-19" name="__codelineno-6-19" href="#__codelineno-6-19"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generated ranking: &quot;</span><span class="p">,</span> <span class="n">ranking_df</span><span class="p">)</span>
<a id="__codelineno-6-20" name="__codelineno-6-20" href="#__codelineno-6-20"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generated scores: &quot;</span><span class="p">,</span> <span class="n">score_df</span><span class="p">)</span>
<a id="__codelineno-6-21" name="__codelineno-6-21" href="#__codelineno-6-21"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;EXP of generated ranking: &quot;</span><span class="p">,</span> <span class="n">EXP_minmax</span><span class="p">,</span>
<a id="__codelineno-6-22" name="__codelineno-6-22" href="#__codelineno-6-22"></a>    <span class="s2">&quot;avg_exposures: &quot;</span><span class="p">,</span> <span class="n">avg_exposures_minmax</span><span class="p">)</span>
</code></pre></div>
<p>Output:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">Generated</span> <span class="n">ranking</span><span class="p">:</span>         <span class="mi">0</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="mi">0</span>   <span class="n">Nick</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="mi">1</span>   <span class="n">Dave</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="mi">2</span>  <span class="n">David</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="mi">3</span>    <span class="n">Joe</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="mi">4</span>  <span class="n">Nancy</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="mi">5</span>   <span class="n">Jane</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="mi">6</span>   <span class="n">Jill</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="mi">7</span>    <span class="n">Amy</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="mi">8</span>  <span class="n">Heidi</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="mi">9</span>  <span class="n">Bella</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="n">Generated</span> <span class="n">scores</span><span class="p">:</span>            <span class="mi">0</span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="mi">0</span>  <span class="mf">0.771321</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="mi">1</span>  <span class="mf">0.760531</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="mi">2</span>  <span class="mf">0.748804</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="mi">3</span>  <span class="mf">0.633648</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="mi">4</span>  <span class="mf">0.498507</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="mi">5</span>  <span class="mf">0.224797</span>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="mi">6</span>  <span class="mf">0.198063</span>
<a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a><span class="mi">7</span>  <span class="mf">0.169111</span>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="mi">8</span>  <span class="mf">0.088340</span>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="mi">9</span>  <span class="mf">0.020752</span>
<a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="n">EXP</span> <span class="n">of</span> <span class="n">generated</span> <span class="n">ranking</span><span class="p">:</span>  <span class="mf">0.5158099476966725</span> <span class="n">avg_exposures</span><span class="p">:</span>  <span class="p">{</span><span class="s1">&#39;M&#39;</span><span class="p">:</span> <span class="mf">0.6404015779112127</span><span class="p">,</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span> <span class="mf">0.33032550440724917</span><span class="p">}</span>
</code></pre></div></p>
<h2 id="how-does-it-work">How does it work?</h2>
<p>RankTune is a fairness-tunable  ranked data generation method. It constructs a ranking(s) <code>ranking_df</code> by placing items into the constructed ranking from top to bottom. The idea behind RankTune is that to construct a "fair" ranking, each time we place an item in the generated ranking, the likelihood of placing an item in a given group should be equal to that group's proportion of the total items (i.e., if a group is 20% of the item pool, then it should have a 20% chance of being placed). Then, on the other side of the spectrum, if we want a completely "unfair" ranking, we should place items into the rankings such that groups are ordered by increasing size from small to large. In this way, smaller groups  get bigger proportions of favorable positions, which violates statistical parity fairness. </p>
<p>To generate rankings along the statistical parity fairness spectrum, RankTune samples a random number in the [0, 1] interval each time it places an item. We design this interval to have "regions" that map to groups. In this way, the unfairness tuning parameter <code>phi</code> controls representativeness, i.e.,  how fairly each group is represented in the ranking. Specifically, when <code>phi = 1</code> , then  each group is fairly represented. Thus each group's region is equal to the group's proportion of the pool (fair). As <code>phi</code> decreases, the fair representation of each group degrades because regions are distorted in such a way that smaller groups have larger regions compared to their proportion of the total pool (unfair). The fairness tuning parameter <code>phi</code> is used to create the regions prior to placing any items into the generated ranking.</p>
<h3 id="ranktune-demonstration">RankTune Demonstration</h3>
<p>The figure below displays the results of generating 200 rankings for different <code>phi</code> representativeness values for multiple group distributions. Average metric values (with <span class="arithmatex">\(95\%\)</span> confidence intervals) are reported for 200 generated rankings per group distribution of <span class="arithmatex">\(1,000\)</span> items. As <code>phi</code> increases, RankTune outputs increasingly fairer rankings. EXP and AWRF are measured with <code>MinMaxRatio</code> combo variables and are more fair at <span class="arithmatex">\(1\)</span> (thus upward slopes), and NDKL, EE-D (EXP with an <code>LTwo</code> combo variable ), and ARP (with an <code>MaxMinDiff</code> combo variable) are more fair at <span class="arithmatex">\(0\)</span> (thus downward slopes). To learn more, including the group distributions used, please see our <a href="https://github.com/KCachel/fairranktune/blob/main/docs/assets/ranktune_report.pdf">technical report</a>. </p>
<div align="center">
  <img src="https://raw.githubusercontent.com/KCachel/fairranktune/main/.github/images/ci_multi_distributions.png">
</div>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Kcachel" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "navigation.top", "navigation.indexes", "toc.follow", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.a7c05c9e.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>